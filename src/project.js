require=function e(t,i,o){function s(c,r){if(!i[c]){if(!t[c]){var h="function"==typeof require&&require;if(!r&&h)return h(c,!0);if(n)return n(c,!0);var a=new Error("Cannot find module '"+c+"'");throw a.code="MODULE_NOT_FOUND",a}var p=i[c]={exports:{}};t[c][0].call(p.exports,function(e){var i=t[c][1][e];return s(i||e)},p,p.exports,e,t,i,o)}return i[c].exports}for(var n="function"==typeof require&&require,c=0;c<o.length;c++)s(o[c]);return s}({Background:[function(e,t,i){"use strict";cc._RF.push(t,"fcee2n/FdJDfYmBlfAf71+2","Background"),cc.Class({extends:cc.Component,properties:{groundNode:[cc.Node],groundImg:cc.Sprite,move_interval:.001,move_speed:-5},onLoad:function(){this._size=cc.winSize,this._width=this.groundImg.spriteFrame.getRect().width,this.schedule(this.onGroundMove,this.move_interval)},onGroundMove:function(){this.groundNode[0].x+=this.move_speed,this.groundNode[1].x+=this.move_speed,this.groundNode[0].x+this._width/2<-this._size.width/2&&(this.groundNode[0].x=this.groundNode[1].x+this._width-5),this.groundNode[1].x+this._width/2<-this._size.width/2&&(this.groundNode[1].x=this.groundNode[0].x+this._width-5)}}),cc._RF.pop()},{}],Bird:[function(e,t,i){"use strict";cc._RF.push(t,"271aehyKOdFdozL7IbH3i7o","Bird"),cc.Class({extends:cc.Component,properties:{gravity:.5,birdJump:6.6},onLoad:function(){this.velocity=0},onStartDrop:function(){this.schedule(this.onDrop,1/60)},onDrop:function(){this.node.y+=this.velocity,this.velocity-=this.gravity},onJump:function(){this.velocity=this.birdJump}}),cc._RF.pop()},{}],Constant:[function(e,t,i){"use strict";cc._RF.push(t,"947b4S4tE5LqI6us1B7WebT","Constant");var o=cc.Enum({GROUND_MOVE_INTERVAL:.05,GROUND_VX:-5,PIPE_UP:0,PIPE_DOWN:1,GAMEOVER_TXT:"GAME OVER",HIGHSCORE_TXT:"HighScore: "});t.exports=o,cc._RF.pop()},{}],Game:[function(e,t,i){"use strict";cc._RF.push(t,"3ed18dqrdxGCbpl8fCqPlXy","Game");var o=e("Bird"),s=e("Background"),n=e("Constant"),c=e("Storage");cc.Class({extends:cc.Component,properties:{pipeMaxOffsetY:150,pipeMinGap:80,pipeMaxGap:200,pipeSpawnInterval:4.5,scoreScaleDuration:.2,pipeSpawnOffsetX:30,gameReflashTime:5,gameMenu:cc.Node,bird:o,background:{default:null,type:s},pipesNode:{default:null,type:cc.Node},pipePrefabs:{default:[],type:[cc.Prefab]},jumpAudio:{default:null,url:cc.AudioClip},gameOverText:{default:null,type:cc.Label},curScoreText:{default:null,type:cc.Label},highScoreText:{default:null,type:cc.Label}},onLoad:function(){this.gameOverText.string=" ",this.curScoreText.node.active=!1,this.setInputControl(),this.size=cc.winSize,this.pipes=[],this.isGameOver=!1,this.curScore=0;var e=this.background.groundNode[0].getBoundingBox();this.groundTop=e.y+e.height,c.getHighScore()>0&&(this.highScoreText.string=n.HIGHSCORE_TXT+c.getHighScore())},setInputControl:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.birdJump.bind(this))},birdJump:function(){cc.audioEngine.playEffect(this.jumpAudio,!1),this.bird.onJump()},onStartGame:function(){this.gameMenu.active=!1,this.curScoreText.node.active=!0,this.bird.onStartDrop(),this.schedule(this.spawnPipes,this.pipeSpawnInterval),this.schedule(this.gameUpdate,.05)},spawnPipes:function(){var e=cc.instantiate(this.pipePrefabs[0]);e.getComponent("Pipe").init(0);var t=e.getComponent("cc.Sprite").spriteFrame.getRect().height;e.x=this.size.width/2+this.pipeSpawnOffsetX,e.y=Math.floor(Math.random()*this.pipeMaxOffsetY)+t/2;var i=cc.instantiate(this.pipePrefabs[1]);i.getComponent("Pipe").init(1),i.x=this.size.width/2+this.pipeSpawnOffsetX;var o=Math.floor(Math.random()*(this.pipeMaxGap-this.pipeMinGap))+this.pipeMinGap+20;i.y=e.y-o-t,this.pipesNode.addChild(e),this.pipesNode.addChild(i),this.pipes.push(e),this.pipes.push(i)},gameUpdate:function(){for(var e=this.bird.node.getBoundingBox(),t=new cc.Rect(e.x,e.y,e.width,e.height),i=0;i<this.pipes.length;i++){var o=this.pipes[i];o.x+=-5;var s=o.getBoundingBox();if(new cc.Rect(s.x,s.y,s.width,s.height).intersects(t))return void this.onGameOver();var n=o.getComponent("Pipe");o.x<this.bird.node.x&&!1===n.isPassed&&0===n.type&&(n.isPassed=!0,this.addScore()),o.x<-(this.size.width/2+this.pipeSpawnOffsetX)&&(this.pipes.splice(i,1),this.pipesNode.removeChild(o,!0))}(this.bird.node.y<this.groundTop||this.bird.node.y>this.size.height/2-e.height/2)&&this.onGameOver()},addScore:function(){this.curScore++,cc.log(this.curScore),this.curScoreText.string=""+this.curScore;var e=cc.scaleTo(this.scoreScaleDuration,1.1,.6),t=cc.scaleTo(this.scoreScaleDuration,.8,1.2),i=cc.scaleTo(this.scoreScaleDuration,1,1);this.curScoreText.node.runAction(cc.sequence(e,t,i))},onGameOver:function(){this.curScoreText.node.active=!1,this.isGameOver=!0,this.gameOverText.string="Game Over",this.curScore>c.getHighScore()&&c.setHighScore(this.curScore),this.bird.unscheduleAllCallbacks(),this.background.unscheduleAllCallbacks(),this.unscheduleAllCallbacks(),this.schedule(function(){cc.director.loadScene("game")},this.gameReflashTime)}}),cc._RF.pop()},{Background:"Background",Bird:"Bird",Constant:"Constant",Storage:"Storage"}],Pipe:[function(e,t,i){"use strict";cc._RF.push(t,"5e442/hg1pEIJT1z76S3vU8","Pipe"),cc.Class({extends:cc.Component,properties:{isPassed:!1},onLoad:function(){},init:function(e){this.type=e}}),cc._RF.pop()},{}],Storage:[function(e,t,i){"use strict";cc._RF.push(t,"97a61wiV6dNUI1J+2GuR6AT","Storage");var o={getHighScore:function(){var e=cc.sys.localStorage.getItem("HighScore")||0;return parseInt(e)},setHighScore:function(e){cc.sys.localStorage.setItem("HighScore",e)}};t.exports=o,cc._RF.pop()},{}]},{},["Background","Bird","Constant","Game","Pipe","Storage"]);